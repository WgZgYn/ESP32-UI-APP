\doxysection{mqtt.\+cpp}
\hypertarget{mqtt_8cpp_source}{}\label{mqtt_8cpp_source}\index{mqtt/mqtt.cpp@{mqtt/mqtt.cpp}}
\mbox{\hyperlink{mqtt_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00001}00001\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00002}00002\ \textcolor{comment}{//\ Created\ by\ 20495\ on\ 24-\/10-\/9.}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00003}00003\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{mqtt_8h}{mqtt.h}}"{}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00006}00006\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{wifi_2config_8h}{wifi/config.h}}>}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_mqtt_view_8h}{MqttView.h}}"{}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{service_8h}{service/service.h}}"{}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00012}00012\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00013}00013\ \textcolor{preprocessor}{\#include\ "{}freertos/timers.h"{}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00014}00014\ \textcolor{preprocessor}{\#include\ "{}freertos/FreeRTOS.h"{}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00015}00015\ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00017}\mbox{\hyperlink{namespacemqtt}{00017}}\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacemqtt}{mqtt}}\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00018}\mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{00018}}\ \ \ \ \ AsyncMqttClient\ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}};}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00019}\mbox{\hyperlink{namespacemqtt_a556bfbf8271bc829139fe550ac7659f7}{00019}}\ \ \ \ \ TimerHandle\_t\ \mbox{\hyperlink{namespacemqtt_a556bfbf8271bc829139fe550ac7659f7}{mqttReconnectTimer}};}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00021}00021\ \textcolor{preprocessor}{\#ifdef\ AUTO\_CONNECT}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00022}00022\ \ \ \ \ TimerHandle\_t\ wifiReconnectTimer;}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00024}00024\ \ \ \ \ \textcolor{keywordtype}{void}\ connectToWifi()\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00025}00025\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Connecting\ to\ Wi-\/Fi..."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00026}00026\ \ \ \ \ \ \ \ \ WiFi.begin(WIFI\_SSID,\ WIFI\_PASSWORD);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00027}00027\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00028}00028\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00030}\mbox{\hyperlink{namespacemqtt_ac722a5bf76dcf8e2273d3d85a98ed221}{00030}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_ac722a5bf76dcf8e2273d3d85a98ed221}{connectToMqtt}}()\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00031}00031\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Connecting\ to\ MQTT..."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00032}00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}.connect();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00033}00033\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00035}\mbox{\hyperlink{namespacemqtt_acfe06a680b70b91f54ba555c4732128c}{00035}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_acfe06a680b70b91f54ba555c4732128c}{WiFiEvent}}(arduino\_event\_id\_t\ event)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00036}00036\ \ \ \ \ \ \ \ \ Serial.printf(\textcolor{stringliteral}{"{}[WiFi-\/event]\ event:\ \%d\(\backslash\)n"{}},\ event);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (event)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ SYSTEM\_EVENT\_STA\_GOT\_IP:}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}WiFi\ connected"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}IP\ address:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00041}00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(WiFi.localIP());}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00042}00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemqtt_ac722a5bf76dcf8e2273d3d85a98ed221}{connectToMqtt}}();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00044}00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ SYSTEM\_EVENT\_STA\_DISCONNECTED:}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}WiFi\ lost\ connection"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00046}00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xTimerStop(\mbox{\hyperlink{namespacemqtt_a556bfbf8271bc829139fe550ac7659f7}{mqttReconnectTimer}},\ 0);\ \textcolor{comment}{//\ ensure\ we\ don't\ reconnect\ to\ MQTT\ while\ reconnecting\ to\ Wi-\/Fi}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00047}00047\ \textcolor{preprocessor}{\#ifdef\ AUTO\_CONNECT}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xTimerStart(wifiReconnectTimer,\ 0);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00049}00049\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00053}00053\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00054}00054\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00056}\mbox{\hyperlink{namespacemqtt_a1be7b64888baa7db11225fe6f5986d62}{00056}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_a1be7b64888baa7db11225fe6f5986d62}{onMqttConnect}}(\textcolor{keywordtype}{bool}\ sessionPresent)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Connected\ to\ MQTT."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}Session\ present:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00059}00059\ \ \ \ \ \ \ \ \ Serial.println(sessionPresent);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ uint16\_t\ packetIdSub\ =\ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}.subscribe(\textcolor{stringliteral}{"{}test/lol"{}},\ 2);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}Subscribing\ at\ QoS\ 2,\ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00062}00062\ \ \ \ \ \ \ \ \ Serial.println(packetIdSub);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}.publish(\textcolor{stringliteral}{"{}test/lol"{}},\ 0,\ \textcolor{keyword}{true},\ \textcolor{stringliteral}{"{}test\ 1"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00064}00064\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Publishing\ at\ QoS\ 0"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ uint16\_t\ packetIdPub1\ =\ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}.publish(\textcolor{stringliteral}{"{}test/lol"{}},\ 1,\ \textcolor{keyword}{true},\ \textcolor{stringliteral}{"{}test\ 2"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00066}00066\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}Publishing\ at\ QoS\ 1,\ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ Serial.println(packetIdPub1);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ uint16\_t\ packetIdPub2\ =\ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}.publish(\textcolor{stringliteral}{"{}test/lol"{}},\ 2,\ \textcolor{keyword}{true},\ \textcolor{stringliteral}{"{}test\ 3"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}Publishing\ at\ QoS\ 2,\ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00070}00070\ \ \ \ \ \ \ \ \ Serial.println(packetIdPub2);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00071}00071\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00073}\mbox{\hyperlink{namespacemqtt_aac1b481ab378776923bf043ed769e812}{00073}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_aac1b481ab378776923bf043ed769e812}{onMqttDisconnect}}(AsyncMqttClientDisconnectReason\ reason)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00074}00074\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Disconnected\ from\ MQTT."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00076}00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (WiFi.isConnected())\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ xTimerStart(\mbox{\hyperlink{namespacemqtt_a556bfbf8271bc829139fe550ac7659f7}{mqttReconnectTimer}},\ 0);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00079}00079\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00081}\mbox{\hyperlink{namespacemqtt_a75069fb93224f313ab1c29754d00d479}{00081}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_a75069fb93224f313ab1c29754d00d479}{onMqttSubscribe}}(uint16\_t\ packetId,\ uint8\_t\ qos)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Subscribe\ acknowledged."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ Serial.println(packetId);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ qos:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00086}00086\ \ \ \ \ \ \ \ \ Serial.println(qos);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00087}00087\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00089}\mbox{\hyperlink{namespacemqtt_a07d71dd000d76dc180055488fedc6922}{00089}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_a07d71dd000d76dc180055488fedc6922}{onMqttUnsubscribe}}(uint16\_t\ packetId)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00090}00090\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Unsubscribe\ acknowledged."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00091}00091\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00092}00092\ \ \ \ \ \ \ \ \ Serial.println(packetId);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00093}00093\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00095}\mbox{\hyperlink{namespacemqtt_aeeb7ff96ae7f2534a99915039784a6dc}{00095}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_aeeb7ff96ae7f2534a99915039784a6dc}{onMqttMessage}}(\textcolor{keywordtype}{char}\ *topic,\ \textcolor{keywordtype}{char}\ *payload,\ AsyncMqttClientMessageProperties\ properties,\ \textcolor{keywordtype}{size\_t}\ len,}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ index,\ \textcolor{keywordtype}{size\_t}\ total)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00097}00097\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00098}00098\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Publish\ received."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ topic:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00100}00100\ \ \ \ \ \ \ \ \ Serial.println(topic);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00101}00101\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ qos:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00102}00102\ \ \ \ \ \ \ \ \ Serial.println(properties.qos);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00103}00103\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ dup:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00104}00104\ \ \ \ \ \ \ \ \ Serial.println(properties.dup);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00105}00105\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ retain:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00106}00106\ \ \ \ \ \ \ \ \ Serial.println(properties.retain);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00107}00107\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ len:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00108}00108\ \ \ \ \ \ \ \ \ Serial.println(len);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00109}00109\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ index:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00110}00110\ \ \ \ \ \ \ \ \ Serial.println(index);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00111}00111\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ total:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00112}00112\ \ \ \ \ \ \ \ \ Serial.println(total);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00113}00113\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}\ \ payload:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00114}00114\ \ \ \ \ \ \ \ \ Serial.println(String(payload,\ len));}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00117}00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmqtt_1_1_message}{Message}}\ \&msg\ =\ \mbox{\hyperlink{classmqtt_1_1_message_a3abd221f27cb781fc80966c9ee0f83f0}{Message::current}}();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00118}00118\ \ \ \ \ \ \ \ \ msg.\mbox{\hyperlink{classmqtt_1_1_message_a3f0877a45e45e5e66ceb7bba70e3b77b}{payload}}\ =\ String(payload,\ len);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00119}00119\ \ \ \ \ \ \ \ \ msg.\mbox{\hyperlink{classmqtt_1_1_message_a9f3e336438232282d2e09c96354b8d62}{qos}}\ =\ properties.qos;}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00120}00120\ \ \ \ \ \ \ \ \ msg.\mbox{\hyperlink{classmqtt_1_1_message_ac9a1aaf5a49251be1a544a676b7cd9fe}{topic}}\ =\ topic;}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00121}00121\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}store\ message"{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (msg.\mbox{\hyperlink{classmqtt_1_1_message_a3f0877a45e45e5e66ceb7bba70e3b77b}{payload}}\ ==\ \textcolor{stringliteral}{"{}open"{}})\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_service_a2a3aa267b40015331ecd9cf82fa1a394}{Service::run}}(\mbox{\hyperlink{class_service_a3a7cd41b2954cbd40b8fe5145fa5f690ac3bf447eabe632720a3aa1a7ce401274}{Service::Func::Open}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00125}00125\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (msg.\mbox{\hyperlink{classmqtt_1_1_message_a3f0877a45e45e5e66ceb7bba70e3b77b}{payload}}\ ==\ \textcolor{stringliteral}{"{}close"{}})\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_service_a2a3aa267b40015331ecd9cf82fa1a394}{Service::run}}(\mbox{\hyperlink{class_service_a3a7cd41b2954cbd40b8fe5145fa5f690ad3d2e617335f08df83599665eef8a418}{Service::Func::Close}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00127}00127\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (msg.\mbox{\hyperlink{classmqtt_1_1_message_a3f0877a45e45e5e66ceb7bba70e3b77b}{payload}}\ ==\ \textcolor{stringliteral}{"{}switch"{}})\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_service_a2a3aa267b40015331ecd9cf82fa1a394}{Service::run}}(\mbox{\hyperlink{class_service_a3a7cd41b2954cbd40b8fe5145fa5f690abbc155fb2b111bf61c4f5ff892915e6b}{Service::Func::Switch}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00129}00129\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00130}00130\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00132}\mbox{\hyperlink{namespacemqtt_a0a5ba5ff34a8cc1c5dc0f73b5ddb8604}{00132}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacemqtt_a0a5ba5ff34a8cc1c5dc0f73b5ddb8604}{onMqttPublish}}(uint16\_t\ packetId)\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00133}00133\ \ \ \ \ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}Publish\ acknowledged."{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00134}00134\ \ \ \ \ \ \ \ \ Serial.print(\textcolor{stringliteral}{"{}\ \ packetId:\ "{}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00135}00135\ \ \ \ \ \ \ \ \ Serial.println(packetId);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00136}00136\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00138}\mbox{\hyperlink{classmqtt_1_1_mqtt_client_a4af282eb2dc3c1be818bbed63beb26a7}{00138}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmqtt_1_1_mqtt_client_a4af282eb2dc3c1be818bbed63beb26a7}{MqttClient::setup}}()\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00139}00139\ \ \ \ \ \ \ \ \ Serial.begin(115200);}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00140}00140\ \ \ \ \ \ \ \ \ Serial.println();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00141}00141\ \ \ \ \ \ \ \ \ Serial.println();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00143}00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemqtt_a556bfbf8271bc829139fe550ac7659f7}{mqttReconnectTimer}}\ =\ xTimerCreate(\textcolor{stringliteral}{"{}mqttTimer"{}},\ pdMS\_TO\_TICKS(2000),\ pdFALSE,\ (\textcolor{keywordtype}{void}\ *)\ 0,}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}TimerCallbackFunction\_t\textcolor{keyword}{>}(\mbox{\hyperlink{namespacemqtt_ac722a5bf76dcf8e2273d3d85a98ed221}{connectToMqtt}}));}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00146}00146\ \textcolor{preprocessor}{\#ifdef\ AUTO\_CONNECT}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00147}00147\ \ \ \ \ \ \ \ \ wifiReconnectTimer\ =\ xTimerCreate(\textcolor{stringliteral}{"{}wifiTimer"{}},\ pdMS\_TO\_TICKS(2000),\ pdFALSE,\ (\textcolor{keywordtype}{void}\ *)\ 0,}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}TimerCallbackFunction\_t\textcolor{keyword}{>}(connectToWifi));}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00149}00149\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00151}00151\ \ \ \ \ \ \ \ \ WiFi.onEvent(\mbox{\hyperlink{namespacemqtt_acfe06a680b70b91f54ba555c4732128c}{WiFiEvent}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00153}00153\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemqtt_a71b55aa335c53fedd30dfc902489d271}{mqttClient}}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onConnect(\mbox{\hyperlink{namespacemqtt_a1be7b64888baa7db11225fe6f5986d62}{onMqttConnect}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onDisconnect(\mbox{\hyperlink{namespacemqtt_aac1b481ab378776923bf043ed769e812}{onMqttDisconnect}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onSubscribe(\mbox{\hyperlink{namespacemqtt_a75069fb93224f313ab1c29754d00d479}{onMqttSubscribe}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onUnsubscribe(\mbox{\hyperlink{namespacemqtt_a07d71dd000d76dc180055488fedc6922}{onMqttUnsubscribe}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onMessage(\mbox{\hyperlink{namespacemqtt_aeeb7ff96ae7f2534a99915039784a6dc}{onMqttMessage}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .onPublish(\mbox{\hyperlink{namespacemqtt_a0a5ba5ff34a8cc1c5dc0f73b5ddb8604}{onMqttPublish}})}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .setServer(\mbox{\hyperlink{wifi_2config_8h_a0b26496e970e561304bd542f701fe223}{MQTT\_HOST}},\ \mbox{\hyperlink{wifi_2config_8h_aa8632baff6bbb5004385998918f1e6bd}{MQTT\_PORT}});}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00161}00161\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00162}00162\ \textcolor{preprocessor}{\#ifdef\ AUTO\_CONNECT}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00163}00163\ \ \ \ \ \ \ \ \ connectToWifi();}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00164}00164\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00166}00166\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00168}\mbox{\hyperlink{classmqtt_1_1_mqtt_client_a5e20ae1b1331cf65b44a55d82521e366}{00168}}\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmqtt_1_1_mqtt_client_a5e20ae1b1331cf65b44a55d82521e366}{MqttClient::loop}}()\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00169}00169\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00170}00170\ }
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00171}\mbox{\hyperlink{classmqtt_1_1_mqtt_client_aa1dfa938c062cd022ede83fa7781bf35}{00171}}\ \ \ \ \ \mbox{\hyperlink{classmqtt_1_1_mqtt_client}{MqttClient}}\ \&\mbox{\hyperlink{classmqtt_1_1_mqtt_client_aa1dfa938c062cd022ede83fa7781bf35}{MqttClient::getInstance}}()\ \{}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00172}00172\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classmqtt_1_1_mqtt_client}{MqttClient}}\ client;}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00173}00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ client;}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00174}00174\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{mqtt_8cpp_source_l00175}00175\ \}}

\end{DoxyCode}
